# So you just got a flexSecure

While there is some overlap with the Apex, app deployment happens quite differently on the flexSecure which relies on Global Platform Pro which is a command line tool.

This is aimed at getting you up and running as quickly as possible but it is strongly suggested you read the [technology](docs/1-technology.md) and [hardware](docs/2-hardware.md) sections. 

## flexSecure Preloaded Apps
All of these sold after 12/2/2024 come preloaded with FIDO2Applet, javacard-memory, apex-totp, and openjavacard-ndef with a 32k container.

## Setting up Global Platform Pro
- Windows
- Linux
- OS X

### Basics
Using the jar or exe, use the following flags:
- Installing an applet
  ```shell
  --install <capfile>
  ```
- Uninstalling
  ```shell
  --uninstall <capfile>
  or
  --remove <capfile or AID>
  ```
- List installed applets
  ```shell
  --list
  ```

## Download applets
Check the [latest release](releases) and download the apps you're interested in before proceeding.

## Apps with a simple install
The following apps can be installed with a single GPP command and the requisite cap file.
- [apex-tesla]()
  Use your flexSecure as a Tesla key.
- apex-totp
  OTP codes generated in vivo.
- flexsecure-ykhmac
  Generate HMAC-SHA1 hashes on the flexSecure. Can be used to secure LastPass.
- javacard-memory
  This is used with Apex Manager to provide a rough estimate on available storage.
- openjavacard-ndef
  Create NDEF containers up to 32k on the flexSecure. If no parameters are provided, it defaults to a 2k container
  - 2k
    ```cmd
    --params 810200F182020800
    ```
  - 4k
    ```cmd
    --params 810200F182021000
    ```
  - 8k
    ```cmd
    --params 810200F182022000
    ```
  - 16k
    ```cmd
    --params 810200F182024000
    ```
  - 32k
    ```cmd
    --params 810200F182027fff
    ```
- SatochipApplet
  This allows your flexSecure to act as a cold wallet. Currently, cold wallets are not supported by Sato mobile apps.
- Satodime-Applet
- Seedkeeper-Applet
- status-keycard
  This allows your flexSecure to act as a cold wallet. Currently, cold wallets are not supported by Status.im mobile apps.
- u2f-javacard
  This is unnecessary if the FIDO2 applet is installed. If, however, you want U2F but don't care about passkeys, this will save you storage.

## Apps with complex install
- FIDO2Applet
  To install this applet, you'll need to generate and load attestation data. You'll need [Python](https://python.org/downloads) and [this repo](https://github.com/dangerousthings/fido-attestation-loader).
  - Setup fido-attestation-loader
    - Update the update settings.example.ini and save it as settings.ini
      - You could generate a new one or use '27291256-2735-45b5-99f9-2863c9dedf72' as we do with the flexSecure we preload.
      - Listed metadata, ca, and cert fields are required but they can (mostly) be anything you like.
        - description: what device is it? we use flexSecure
        - icon: we use a png around 40x40
        - c: country. we use US
        - o: organization. we use Dangerous Things
        - cn: certificate name. Leave these alone
    - Install python packages
    ```shell
    pip install -r "requirements.txt"
    ```
  - Generate central authority and attestation certificates
  You'll want to save the files generated by this as well as the passphrases you use to secure them. To make it easy, you can save the phrases in files called ca_key.pass and attestation_key.pass in the fido-attestation-loader directory.
  ```shell
  python attestation.py ca create
  ```
  ```shell
  python attestation.py cert create -m fido21
  ```
  ```shell
  python attestation.py cert validate -m fido21
  ```
  ```shell
  # Example Output
  ```
  ```shell
  python attestation.py cert -f show -m fido21
  ```
  ```shell
  # Example Output
  ```
  Copy the params value
  - Install the applet with the generated parameters
  ```shell
  --install FIDO2.cap --params <monstrous-hex-string>
  ```
  - Load the attestation certificate
  ```shell
  python attestation.py cert upload -m fido21
  ```
- SmartPGP
